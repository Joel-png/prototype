[gd_scene load_steps=22 format=4 uid="uid://dshywy58vc6s7"]

[ext_resource type="Script" path="res://Scripts/world.gd" id="1_5i068"]
[ext_resource type="PackedScene" uid="uid://dqvqvqgmttuvl" path="res://player.tscn" id="2_6vsb2"]
[ext_resource type="Script" path="res://player_manager.gd" id="3_6oj04"]
[ext_resource type="Script" path="res://Scripts/multiplayer_spawner.gd" id="3_lu5lj"]
[ext_resource type="Script" path="res://Scripts/terrain_generator.gd" id="4_hblxr"]
[ext_resource type="Shader" path="res://Assets/Ground/grass.gdshader" id="5_2jamn"]
[ext_resource type="Material" uid="uid://cqsrnvdsadenf" path="res://grass_shader_material.tres" id="7_4kvgo"]
[ext_resource type="Texture2D" uid="uid://7pgy3bjgaluk" path="res://Assets/image.png" id="7_hic37"]
[ext_resource type="Texture2D" uid="uid://d3o0vhds1k2ws" path="res://Assets/image_normal.png" id="8_1a4ak"]
[ext_resource type="ArrayMesh" uid="uid://bgm7i30x6ch2k" path="res://grass_mesh.tres" id="8_i2t62"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_q50i2"]
sky_top_color = Color(0.325347, 0.338933, 0.621227, 1)
sky_horizon_color = Color(0.512898, 0.154585, 0.250554, 1)
sky_energy_multiplier = 0.2
ground_bottom_color = Color(0, 0, 0, 1)
ground_horizon_color = Color(0.513726, 0.152941, 0.25098, 1)
ground_curve = 0.117127
ground_energy_multiplier = 0.2
sun_curve = 0.621158

[sub_resource type="Sky" id="Sky_tug5e"]
sky_material = SubResource("ProceduralSkyMaterial_q50i2")

[sub_resource type="Environment" id="Environment_f23m3"]
background_mode = 2
background_energy_multiplier = 0.1
background_intensity = 3.0
sky = SubResource("Sky_tug5e")
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_sky_contribution = 0.99
tonemap_mode = 2
sdfgi_read_sky_light = false
sdfgi_bounce_feedback = 0.0
sdfgi_cascades = 1
sdfgi_max_distance = 25.6
fog_enabled = true
fog_aerial_perspective = 0.932
fog_depth_begin = 0.0
fog_depth_end = 116.0
volumetric_fog_enabled = true
volumetric_fog_density = 0.036
volumetric_fog_emission = Color(0.1333, 0.00298389, 0, 1)
volumetric_fog_emission_energy = 0.0
volumetric_fog_anisotropy = 0.46
volumetric_fog_detail_spread = 6.0

[sub_resource type="FastNoiseLite" id="FastNoiseLite_xhuuh"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_1mi5f"]
width = 51
height = 51
noise = SubResource("FastNoiseLite_xhuuh")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_woola"]
frequency = 1.0
fractal_type = 0
fractal_weighted_strength = 1.0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_le406"]
width = 101
height = 101
seamless = true
noise = SubResource("FastNoiseLite_woola")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_2f7kd"]
shader = ExtResource("5_2jamn")
shader_parameter/instance_rows = 100.0
shader_parameter/instance_rot_randomize = 360.0
shader_parameter/instance_spacing = 0.25
shader_parameter/instance_scale_x = 1.0
shader_parameter/instance_scale_y = 1.0
shader_parameter/instance_scale_z = 1.0
shader_parameter/instance_scale_randomize = 1.0
shader_parameter/instance_pos_randomize = 5.0
shader_parameter/instance_scale_min = 0.5
shader_parameter/instance_scale_max = 1.0
shader_parameter/_coverage_altitude = 10.0
shader_parameter/_coverage_range = 1000.0
shader_parameter/_slope_coverage = 1000.0
shader_parameter/clumping_strength = 65.0
shader_parameter/terrain_normal_basis = Basis(1, 0, 0, 0, 1, 0, 0, 0, 1)
shader_parameter/height_offset = 0.0
shader_parameter/size_difference_of_world = 3.0
shader_parameter/instance_orient_to_normal = true
shader_parameter/instance_orientation_influence = 1.0
shader_parameter/__terrain_amplitude = 40.0
shader_parameter/map_heightmap_size = Vector2(101, 101)
shader_parameter/map_normalmap_size = Vector2(101, 101)
shader_parameter/map_heightmap = ExtResource("7_hic37")
shader_parameter/map_normalmap = ExtResource("8_1a4ak")
shader_parameter/map_clumpmap = SubResource("NoiseTexture2D_le406")

[sub_resource type="ArrayMesh" id="ArrayMesh_4ig01"]
_surfaces = [{
"aabb": AABB(-1, -1, -1, 2, 2, 2),
"attribute_data": PackedByteArray("/////wAA/////wAAAAAAAP////8AAP////8AAAAAAAA="),
"format": 34896613399,
"index_count": 12,
"index_data": PackedByteArray("AAABAAIAAgABAAMABAAFAAYABgAFAAcA"),
"material": ExtResource("7_4kvgo"),
"name": "Plane",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 8,
"vertex_data": PackedByteArray("//8AAP9/AIAAAAAA/38AgP//////fwCAAAD///9/AID/fwAAAAD/v/9/AAD///+//3///wAA/7//f///////v/9/////f////3////9/////fwAA/38AAP9/AAD/fwAA")
}]
blend_shape_mode = 0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xs7c2"]
shader = ExtResource("5_2jamn")
shader_parameter/instance_rows = 100.0
shader_parameter/instance_rot_randomize = 360.0
shader_parameter/instance_spacing = 1.0
shader_parameter/instance_scale_x = 1.0
shader_parameter/instance_scale_y = 1.0
shader_parameter/instance_scale_z = 1.0
shader_parameter/instance_scale_randomize = 1.0
shader_parameter/instance_pos_randomize = 5.0
shader_parameter/instance_scale_min = 0.5
shader_parameter/instance_scale_max = 1.0
shader_parameter/_coverage_altitude = 10.0
shader_parameter/_coverage_range = 1000.0
shader_parameter/_slope_coverage = 1000.0
shader_parameter/clumping_strength = 53.857
shader_parameter/terrain_normal_basis = Basis(1, 0, 0, 0, 1, 0, 0, 0, 1)
shader_parameter/height_offset = -0.1
shader_parameter/size_difference_of_world = 3.0
shader_parameter/instance_orient_to_normal = true
shader_parameter/instance_orientation_influence = 1.0
shader_parameter/__terrain_amplitude = 40.0
shader_parameter/map_heightmap_size = Vector2(101, 101)
shader_parameter/map_normalmap_size = Vector2(101, 101)
shader_parameter/map_heightmap = ExtResource("7_hic37")
shader_parameter/map_normalmap = ExtResource("8_1a4ak")
shader_parameter/map_clumpmap = SubResource("NoiseTexture2D_le406")

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_iuys2"]
properties/0/path = NodePath(".:terrain_seed")
properties/0/spawn = true
properties/0/replication_mode = 1

[node name="World" type="Node3D"]
script = ExtResource("1_5i068")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.900996, -0.39044, -0.189109, -0.413544, 0.904706, 0.102414, 0.131102, 0.170479, -0.976601, 0, 0, 0)
light_intensity_lux = 4545.45
light_temperature = 4000.0
light_color = Color(0.495005, 0.293684, 0.353005, 1)
light_energy = 0.001
light_indirect_energy = 0.0
shadow_enabled = true
shadow_bias = 0.0
shadow_blur = 0.504
directional_shadow_blend_splits = true
directional_shadow_max_distance = 888.6

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_f23m3")

[node name="CSGBox3D7" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 4.51013, 0.765652, 0, -5.3683, 0.643255, 32.0649, 34.2903, -79.2303)
use_collision = true
size = Vector3(61.8309, 15.7396, 1)

[node name="Players" type="Node3D" parent="."]
script = ExtResource("3_6oj04")

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
spawn_path = NodePath("../Players")
script = ExtResource("3_lu5lj")
player_scene = ExtResource("2_6vsb2")

[node name="Projectiles" type="Node3D" parent="."]

[node name="TerrainGeneration" type="Node3D" parent="."]
script = ExtResource("4_hblxr")
noise_texture = SubResource("NoiseTexture2D_1mi5f")

[node name="GrassParticle" type="GPUParticles3D" parent="TerrainGeneration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.399734, -0.259109, -1.44857)
visible = false
extra_cull_margin = 6187.38
amount = 10000
lifetime = 0.01
explosiveness = 1.0
draw_order = 3
process_material = SubResource("ShaderMaterial_2f7kd")
draw_pass_1 = SubResource("ArrayMesh_4ig01")

[node name="GrassParticle2" type="GPUParticles3D" parent="TerrainGeneration"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.399734, -0.259109, -1.44857)
visible = false
extra_cull_margin = 6187.38
amount = 10000
lifetime = 0.01
explosiveness = 1.0
draw_order = 3
process_material = SubResource("ShaderMaterial_xs7c2")
draw_pass_1 = ExtResource("8_i2t62")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_iuys2")
